---
/**
 * FAQ Page - All frequently asked questions
 * 
 * Comprehensive FAQ page organized by category.
 * Includes FAQ schema markup for rich snippets.
 */
import DarkHeroLayout from '../layouts/DarkHeroLayout.astro';
import SchemaMarkup from '../components/SchemaMarkup.astro';
import { faqs, getFAQsByCategory } from '../lib/faqs';

const title = "FAQ";
const description = "Frequently asked questions about Ninja Design Studio's Web3 design services, pricing, process, and more.";

// Organize FAQs by category
const categories = [
  { id: 'general', title: 'General Questions', icon: 'ðŸ’¡' },
  { id: 'pricing', title: 'Pricing & Timeline', icon: 'ðŸ’°' },
  { id: 'process', title: 'Our Process', icon: 'âš™ï¸' },
  { id: 'services', title: 'Services', icon: 'ðŸŽ¨' },
] as const;

// Get all FAQs for schema
const allFaqs = faqs.map(f => ({ question: f.question, answer: f.answer }));
---

<DarkHeroLayout title={title} description={description}>
  <!-- FAQ Schema -->
  <SchemaMarkup slot="head" type="FAQ" faqs={allFaqs} />

  <!-- Hero -->
  <section class="faq-hero">
    <div class="faq-hero-bg"></div>
    <div class="faq-hero-container">
      <span class="hero-eyebrow">Got Questions?</span>
      <h1 class="hero-title">Frequently Asked <span class="gradient-text">Questions</span></h1>
      <p class="hero-subtitle">
        Everything you need to know about working with us. Can't find what you're looking for? 
        <a href="/contact">Get in touch</a>.
      </p>
    </div>
  </section>

  <!-- Quick Jump Nav -->
  <nav class="faq-nav">
    <div class="faq-nav-container">
      {categories.map((cat) => (
        <a href={`#${cat.id}`} class="faq-nav-item">
          <span class="nav-icon">{cat.icon}</span>
          <span>{cat.title}</span>
        </a>
      ))}
    </div>
  </nav>

  <!-- FAQ Sections -->
  <section class="faq-content">
    <div class="faq-container">
      {categories.map((category) => {
        const categoryFaqs = getFAQsByCategory(category.id);
        return categoryFaqs.length > 0 && (
          <div class="faq-category" id={category.id}>
            <div class="category-header">
              <span class="category-icon">{category.icon}</span>
              <h2 class="category-title">{category.title}</h2>
            </div>
            <div class="faq-list">
              {categoryFaqs.map((faq) => (
                <details class="faq-item" id={faq.id}>
                  <summary class="faq-question">
                    <span class="question-text">{faq.question}</span>
                    <svg class="faq-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                  </summary>
                  <div class="faq-answer">
                    <p>{faq.answer}</p>
                  </div>
                </details>
              ))}
            </div>
          </div>
        );
      })}
    </div>
  </section>

  <!-- Still Have Questions CTA -->
  <section class="faq-cta">
    <div class="faq-cta-container">
      <div class="cta-content">
        <span class="cta-icon">ðŸ¤”</span>
        <h2>Still have questions?</h2>
        <p>Can't find the answer you're looking for? We're here to help.</p>
        <div class="cta-buttons">
          <a href="/contact" class="btn btn-primary">
            Contact Us
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
          <a href="https://t.me/ninjaguy" target="_blank" rel="noopener noreferrer" class="btn btn-ghost">
            Chat on Telegram
          </a>
        </div>
      </div>
    </div>
  </section>
</DarkHeroLayout>

<style>
  /* Hero */
  .faq-hero {
    position: relative;
    padding: 10rem 2rem 5rem;
    text-align: center;
    overflow: hidden;
  }

  .faq-hero-bg {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(ellipse at 50% 0%, rgba(255, 0, 110, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(0, 245, 255, 0.1) 0%, transparent 40%),
      var(--darker);
  }

  .faq-hero-container {
    position: relative;
    max-width: 700px;
    margin: 0 auto;
  }

  .hero-eyebrow {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--neon-pink);
    margin-bottom: 1rem;
  }

  .hero-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 800;
    color: var(--white);
    margin-bottom: 1rem;
    line-height: 1.1;
  }

  .gradient-text {
    background: linear-gradient(135deg, var(--neon-pink), var(--neon-cyan));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.6);
    line-height: 1.7;
  }

  .hero-subtitle a {
    color: var(--neon-cyan);
    text-decoration: none;
  }

  .hero-subtitle a:hover {
    text-decoration: underline;
  }

  /* Quick Nav */
  .faq-nav {
    position: sticky;
    top: 70px;
    z-index: 50;
    background: rgba(5, 5, 8, 0.9);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding: 1rem 0;
  }

  .faq-nav-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .faq-nav-item {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 100px;
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .faq-nav-item:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 0, 110, 0.3);
    color: var(--white);
  }

  .nav-icon {
    font-size: 1rem;
  }

  /* Content */
  .faq-content {
    padding: 4rem 2rem 6rem;
    background: var(--dark);
  }

  .faq-container {
    max-width: 800px;
    margin: 0 auto;
  }

  /* Category */
  .faq-category {
    margin-bottom: 4rem;
    scroll-margin-top: 140px;
  }

  .faq-category:last-child {
    margin-bottom: 0;
  }

  .category-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .category-icon {
    font-size: 1.5rem;
  }

  .category-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--white);
    margin: 0;
  }

  /* FAQ Items */
  .faq-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .faq-item {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .faq-item:hover {
    background: rgba(255, 255, 255, 0.04);
  }

  .faq-item[open] {
    border-color: rgba(255, 0, 110, 0.3);
    background: rgba(255, 0, 110, 0.02);
  }

  .faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    list-style: none;
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .question-text {
    font-size: 1rem;
    font-weight: 600;
    color: var(--white);
    line-height: 1.5;
  }

  .faq-chevron {
    flex-shrink: 0;
    color: rgba(255, 255, 255, 0.4);
    transition: transform 0.3s ease;
  }

  .faq-item[open] .faq-chevron {
    transform: rotate(180deg);
    color: var(--neon-pink);
  }

  .faq-answer {
    padding: 0 1.5rem 1.5rem;
  }

  .faq-answer p {
    font-size: 1rem;
    line-height: 1.8;
    color: rgba(255, 255, 255, 0.7);
    margin: 0;
  }

  /* CTA */
  .faq-cta {
    padding: 5rem 2rem;
    background: linear-gradient(135deg, rgba(255, 0, 110, 0.08) 0%, rgba(0, 245, 255, 0.05) 100%);
  }

  .faq-cta-container {
    max-width: 600px;
    margin: 0 auto;
  }

  .cta-content {
    text-align: center;
  }

  .cta-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: 1.5rem;
  }

  .cta-content h2 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--white);
    margin-bottom: 0.75rem;
  }

  .cta-content p {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.6);
    margin-bottom: 2rem;
  }

  .cta-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  /* Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.75rem;
    font-weight: 600;
    font-size: 0.95rem;
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: var(--gradient-pink);
    color: white;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
  }

  .btn-ghost {
    background: transparent;
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .btn-ghost:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--neon-cyan);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .faq-hero {
      padding: 8rem 1.5rem 3rem;
    }

    .faq-nav-container {
      gap: 0.5rem;
    }

    .faq-nav-item span:not(.nav-icon) {
      display: none;
    }

    .faq-nav-item {
      padding: 0.5rem 0.75rem;
    }

    .nav-icon {
      font-size: 1.25rem;
    }

    .faq-content {
      padding: 3rem 1.5rem 4rem;
    }

    .cta-buttons {
      flex-direction: column;
    }

    .btn {
      width: 100%;
    }
  }
</style>

<script>
  // Open FAQ from URL hash
  const hash = window.location.hash;
  if (hash) {
    const element = document.querySelector(hash);
    if (element && element.tagName === 'DETAILS') {
      (element as HTMLDetailsElement).open = true;
      element.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }

  // Update URL when FAQ is opened
  document.querySelectorAll('.faq-item').forEach(item => {
    item.addEventListener('toggle', (e) => {
      const details = e.target as HTMLDetailsElement;
      if (details.open && details.id) {
        history.replaceState(null, '', `#${details.id}`);
      }
    });
  });
</script>
